<!DOCTYPE html><html> <head><title>Lines remover | Adrian Palomo</title><meta name="viewport" content="width=device-width, initial-scale=1"><meta charset="UTF-8"><meta property="og:type" content="website"><meta property="og:url" content="https://adrianpalomo.com/"><meta property="og:title" content="Adrián Palomo | Tools"><meta property="og:site_name" content="Adrián Palomo | Tools"><meta property="og:locale" content="es_ES"><meta name="robots" content="noindex, nofollow, noimageindex"><link rel="icon" type="image/png" href="/images/Fav.webp"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-light.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script><link rel="stylesheet" href="/_astro/investmentCalculator.VUgsTnFL.css">
<style>button[data-astro-cid-h6qvqvjp]{cursor:pointer}button[data-astro-cid-h6qvqvjp]:active{transform:scale(.95);transition:transform .2s ease-in-out}svg[data-astro-cid-h6qvqvjp]{width:20px;height:20px}mark[data-astro-cid-h6qvqvjp]{background-color:#fbbf24!important;color:#000!important;padding:2px 4px;border-radius:2px}code[data-astro-cid-h6qvqvjp]{display:block;width:100%;min-height:100px}pre[data-astro-cid-h6qvqvjp]{margin:0;background-color:#1f2937!important}pre[data-astro-cid-h6qvqvjp] code[data-astro-cid-h6qvqvjp].hljs{background-color:#1f2937!important;color:#f3f4f6!important}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.bg-gray-800[data-astro-cid-h6qvqvjp]{animation:fadeInUp .3s ease-out}pre[data-astro-cid-h6qvqvjp]::-webkit-scrollbar{height:8px;width:8px}pre[data-astro-cid-h6qvqvjp]::-webkit-scrollbar-track{background:#374151;border-radius:4px}pre[data-astro-cid-h6qvqvjp]::-webkit-scrollbar-thumb{background:#4b5563;border-radius:4px}pre[data-astro-cid-h6qvqvjp]::-webkit-scrollbar-thumb:hover{background:#6b7280}
</style></head> <body>  <div class="min-h-screen bg-gray-900 p-4 font-sans text-gray-100" data-astro-cid-h6qvqvjp> <!-- Header --> <h1 class="mb-6 text-3xl font-bold text-blue-500" data-astro-cid-h6qvqvjp>Eliminar líneas</h1> <!-- Control Panel --> <div class="mb-4 rounded-lg border border-gray-700 bg-gray-800 p-4 shadow-lg" data-astro-cid-h6qvqvjp> <!-- Input Section --> <div class="mb-4" data-astro-cid-h6qvqvjp> <label for="textoEntrada" class="mb-2 block text-sm font-medium text-gray-300" data-astro-cid-h6qvqvjp>Pega aquí tu texto:</label> <textarea id="textoEntrada" class="w-full rounded-md border border-gray-600 bg-gray-700 p-3 font-mono text-sm text-gray-100 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none" rows="8" placeholder="Escribe o pega tu texto aquí..." data-astro-cid-h6qvqvjp></textarea> </div> <!-- Search & Options Section --> <div class="mb-4 flex flex-col gap-3" data-astro-cid-h6qvqvjp> <div class="flex flex-wrap items-center gap-3" data-astro-cid-h6qvqvjp> <input type="text" id="keywordInput" placeholder="Palabra clave a buscar..." class="min-w-48 flex-1 rounded-md border border-gray-600 bg-gray-700 px-4 py-2 text-gray-100 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none" data-astro-cid-h6qvqvjp> <button id="formatButton" class="rounded-md bg-blue-600 px-6 py-2 font-medium text-white transition-colors hover:bg-blue-700" data-astro-cid-h6qvqvjp>Procesar</button> </div> </div> <!-- Toggle Options --> <div class="flex flex-wrap items-center gap-3" data-astro-cid-h6qvqvjp> <label class="flex cursor-pointer items-center gap-2" data-astro-cid-h6qvqvjp> <input type="checkbox" id="maintainOrRemove" class="h-4 w-4 rounded border-gray-600 bg-gray-700 text-blue-600 focus:ring-2 focus:ring-blue-500" data-astro-cid-h6qvqvjp> <span class="text-sm text-gray-300" title="Marcado: Mantener líneas con coincidencias | Desmarcado: Eliminar líneas con coincidencias" data-astro-cid-h6qvqvjp>Mantener coincidencias</span> </label> <label class="flex cursor-pointer items-center gap-2" data-astro-cid-h6qvqvjp> <input type="checkbox" id="caseSensitive" class="h-4 w-4 rounded border-gray-600 bg-gray-700 text-blue-600 focus:ring-2 focus:ring-blue-500" data-astro-cid-h6qvqvjp> <span class="text-sm text-gray-300" data-astro-cid-h6qvqvjp>Sensible a mayúsculas</span> </label> <label class="flex cursor-pointer items-center gap-2" data-astro-cid-h6qvqvjp> <input type="checkbox" id="wholeWord" class="h-4 w-4 rounded border-gray-600 bg-gray-700 text-blue-600 focus:ring-2 focus:ring-blue-500" data-astro-cid-h6qvqvjp> <span class="text-sm text-gray-300" data-astro-cid-h6qvqvjp>Palabra completa</span> </label> </div> <!-- Status Messages --> <div class="mt-3 flex items-center gap-4" data-astro-cid-h6qvqvjp> <span id="valid" class="text-sm font-medium text-green-500" data-astro-cid-h6qvqvjp></span> <span id="invalid" class="text-sm font-medium text-red-500" data-astro-cid-h6qvqvjp></span> </div> </div> <!-- Result Toolbar --> <div class="flex flex-wrap items-center justify-between gap-4 border-b border-gray-700 bg-gray-800 px-5 py-4" data-astro-cid-h6qvqvjp> <div class="flex items-center gap-3" data-astro-cid-h6qvqvjp> <p class="font-bold text-gray-300" data-astro-cid-h6qvqvjp>Resultado</p> <button id="copyButton" class="rounded-md bg-gray-600 p-2 text-gray-100 transition-colors hover:bg-gray-500" title="Copiar" data-astro-cid-h6qvqvjp> <svg data-astro-cid-h6qvqvjp="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-clipboard-list"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2"></path><path d="M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"></path><path d="M9 12l.01 0"></path><path d="M13 12l2 0"></path><path d="M9 16l.01 0"></path><path d="M13 16l2 0"></path></svg> </button> <button id="clearButton" class="rounded-md bg-gray-600 p-2 text-gray-100 transition-colors hover:bg-gray-500" title="Limpiar" data-astro-cid-h6qvqvjp> <svg data-astro-cid-h6qvqvjp="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 7l16 0"></path><path d="M10 11l0 6"></path><path d="M14 11l0 6"></path><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path></svg> </button> </div> <div class="flex items-center gap-3" data-astro-cid-h6qvqvjp> <div class="relative flex items-center" data-astro-cid-h6qvqvjp> <input type="text" id="buscador" placeholder="Buscar en resultado..." class="min-w-48 rounded-md border border-gray-600 bg-gray-700 px-4 py-2 pr-16 text-sm text-gray-100 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none" data-astro-cid-h6qvqvjp> <span id="contadorCoincidencias" class="absolute right-3 text-xs text-gray-400" data-astro-cid-h6qvqvjp></span> </div> <select id="historyPicklist" onchange="loadFromHistory(this.value)" class="max-w-72 min-w-48 rounded-md border border-gray-600 bg-gray-700 px-3 py-2 text-sm text-gray-100" data-astro-cid-h6qvqvjp> <option disabled selected data-astro-cid-h6qvqvjp>Historial de procesados</option> </select> <button id="clearHistoryButton" class="rounded-md bg-red-600 px-3 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700" title="Borrar historial" data-astro-cid-h6qvqvjp>Limpiar</button> </div> </div> <!-- Result Output --> <div class="mt-4 rounded-lg border border-gray-700 bg-gray-800" data-astro-cid-h6qvqvjp> <pre class="overflow-x-auto rounded-lg bg-gray-800 p-4" data-astro-cid-h6qvqvjp>				<code id="textoSalida" class="block font-mono text-sm text-gray-100" style="white-space: pre-wrap; word-wrap: break-word;" data-astro-cid-h6qvqvjp></code>
			</pre> </div> </div> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.css"> <script type="module" src="/_astro/linesRemover.astro_astro_type_script_index_0_lang.Cu8E7ajW.js"></script>  </body></html> <script type="module">
	document.addEventListener('DOMContentLoaded', function () {
		var textoGuardado = localStorage.getItem('textoGuardado');
		if (textoGuardado) {
			document.getElementById('textoEntrada').value = textoGuardado;
		}
		updateHistoryPicklist();

		if (document.getElementById('textoSalida').dataset.highlighted) {
			delete document.getElementById('textoSalida').dataset.highlighted;
		}

		document
			.getElementById('buscador')
			.addEventListener('input', function () {
				buscarEnTexto();
			});

		document
			.getElementById('formatButton')
			.addEventListener('click', function () {
				eliminarLineas();
			});

		document
			.getElementById('clearHistoryButton')
			.addEventListener('click', clearHistory);

		// Event listeners para los botones Copy y Clear del resultado
		document
			.getElementById('copyButton')
			.addEventListener('click', copiarAlPortapapeles);
		document
			.getElementById('clearButton')
			.addEventListener('click', limpiarTexto);

		// Permitir presionar Enter en el campo de keyword para procesar
		document
			.getElementById('keywordInput')
			.addEventListener('keypress', function (event) {
				if (event.key === 'Enter') {
					eliminarLineas();
				}
			});

		// Permitir presionar Enter en el textarea para procesar
		document
			.getElementById('textoEntrada')
			.addEventListener('keypress', function (event) {
				if (event.key === 'Enter' && event.ctrlKey) {
					eliminarLineas();
				}
			});
	});

	function eliminarLineas() {
		var input = document.getElementById('textoEntrada').value;
		var mantenerOEliminar =
			document.getElementById('maintainOrRemove').checked;
		var textoABuscar = document.getElementById('keywordInput').value;
		var caseSensitive = document.getElementById('caseSensitive').checked;
		var wholeWord = document.getElementById('wholeWord').checked;
		var lineas = input.split('\n');
		var textoProcesado = '';

		// Si no hay texto a buscar, mostrar todo el texto sin procesar
		if (!textoABuscar) {
			document.getElementById('valid').textContent = '';
			document.getElementById('invalid').textContent =
				'Ingresa una palabra clave';
			return;
		}

		var flags = caseSensitive ? 'g' : 'gi';
		var pattern = wholeWord
			? '\\b' + escapeRegExp(textoABuscar) + '\\b'
			: escapeRegExp(textoABuscar);
		var regex = new RegExp(pattern, flags);

		var lineasProcesadas = 0;
		lineas.forEach(function (linea) {
			var coincide = regex.test(linea);
			// Si mantenerOEliminar está checked (true) = MANTENER las que coinciden
			// Si mantenerOEliminar está unchecked (false) = ELIMINAR las que coinciden (mantener las que NO coinciden)
			if (
				(mantenerOEliminar && coincide) ||
				(!mantenerOEliminar && !coincide)
			) {
				textoProcesado += linea + '\n';
				lineasProcesadas++;
			}
		});

		document.getElementById('textoSalida').textContent =
			textoProcesado.trim();
		hljs.highlightElement(document.getElementById('textoSalida'));
		localStorage.setItem('textoGuardado', input);

		// Actualizar indicadores
		var totalLineas = lineas.length;
		var accion = mantenerOEliminar ? 'mantenidas' : 'eliminadas';
		document.getElementById('valid').textContent =
			`${lineasProcesadas} líneas procesadas de ${totalLineas}`;
		document.getElementById('invalid').textContent = '';

		// Agregar al historial si no está duplicado
		if (
			textoProcesado.trim() &&
			!checkDuplicateInHistory(textoProcesado.trim())
		) {
			addToHistory(textoProcesado.trim());
		}
	}

	function buscarEnTexto() {
		var textoABuscar = document.getElementById('buscador').value;
		var caseSensitive = document.getElementById('caseSensitive').checked;
		var wholeWord = document.getElementById('wholeWord').checked;

		if (textoABuscar.length < 2) {
			document.getElementById('contadorCoincidencias').innerText = '';
			// Restaurar texto original sin highlighting
			var originalText = document.querySelector('code').textContent;
			document.querySelector('code').textContent = originalText;
			hljs.highlightElement(document.querySelector('code'));
			return;
		}

		var flags = caseSensitive ? 'g' : 'gi';
		var pattern = wholeWord
			? '\\b' + escapeRegExp(textoABuscar) + '\\b'
			: escapeRegExp(textoABuscar);

		var originalText = document.querySelector('code').textContent;
		var regex = new RegExp(pattern, flags);

		var matches = originalText.match(regex);
		var contador = matches ? matches.length : 0;
		document.getElementById('contadorCoincidencias').innerText = contador;

		var highlightedText = originalText.replace(regex, function (match) {
			return '<mark>' + match + '</mark>';
		});
		document.querySelector('code').innerHTML = highlightedText;
		hljs.highlightElement(document.querySelector('code'));
	}

	function escapeRegExp(string) {
		return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
	}

	function copiarAlPortapapeles() {
		const texto = document.querySelector('code').textContent;

		if (navigator.clipboard) {
			navigator.clipboard.writeText(texto).then(() => {
				mostrarFeedbackCopia();
			});
		} else {
			// Fallback para navegadores antiguos
			const elemento = document.createElement('textarea');
			elemento.value = texto;
			document.body.appendChild(elemento);
			elemento.select();
			document.execCommand('copy');
			document.body.removeChild(elemento);
			mostrarFeedbackCopia();
		}
	}

	function mostrarFeedbackCopia() {
		var validSpan = document.getElementById('valid');
		validSpan.textContent = '¡Copiado al portapapeles!';
		setTimeout(function () {
			validSpan.textContent = '';
		}, 2000);
	}

	function limpiarTexto() {
		document.getElementById('textoEntrada').value = '';
		document.getElementById('textoSalida').textContent = '';
		document.getElementById('buscador').value = '';
		document.getElementById('keywordInput').value = '';
		document.getElementById('contadorCoincidencias').innerText = '';
		document.getElementById('valid').textContent = '';
		document.getElementById('invalid').textContent = '';
		localStorage.removeItem('textoGuardado');
	}

	function addToHistory(jsonText) {
		var history = JSON.parse(localStorage.getItem('jsonHistory') || '[]');

		var entry = {
			timestamp: new Date().toISOString(),
			text: jsonText,
		};

		history.unshift(entry);
		history = history.slice(0, 50);
		localStorage.setItem('jsonHistory', JSON.stringify(history));

		updateHistoryPicklist();
	}

	function checkDuplicateInHistory(jsonText) {
		var history = JSON.parse(localStorage.getItem('jsonHistory') || '[]');
		for (var i = 0; i < history.length; i++) {
			if (history[i].text === jsonText) {
				return true;
			}
		}
		return false;
	}

	function clearHistory() {
		localStorage.setItem('jsonHistory', JSON.stringify([]));
		updateHistoryPicklist();
	}

	function updateHistoryPicklist() {
		var history = JSON.parse(localStorage.getItem('jsonHistory') || '[]');
		var picklist = document.getElementById('historyPicklist');

		picklist.innerHTML =
			'<option disabled selected>Historial de procesados</option>';

		history.forEach(function (entry) {
			var date = new Date(entry.timestamp);
			var dateString = `[${pad(date.getHours())}:${pad(date.getMinutes())}:${pad(date.getSeconds())} ${pad(date.getDate())}/${pad(date.getMonth() + 1)}/${date.getFullYear()}]`;
			var textPreview = entry.text ? entry.text.substring(0, 120) : '';
			var option = new Option(
				dateString + ' ' + textPreview,
				JSON.stringify(entry)
			);
			picklist.add(option);
		});
	}

	function pad(number) {
		return number < 10 ? '0' + number : number;
	}

	function loadFromHistory(selectedValue) {
		if (!selectedValue) return;

		var entry = JSON.parse(selectedValue);
		if (entry && entry.text) {
			document.getElementById('textoSalida').textContent = entry.text;
			hljs.highlightElement(document.getElementById('textoSalida'));
		}
	}

	// Hacer la función global para que el onchange del select pueda accederla
	window.loadFromHistory = loadFromHistory;
</script> 